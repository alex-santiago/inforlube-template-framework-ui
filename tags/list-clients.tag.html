<list-clients>
  <div class="card mb-3">
    <div class="card-header"><i class="fa fa-table"></i> List Clients</div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="dataTable table table-bordered table-striped" id="client-table" width="100%" cellspacing="0">
          <thead>
            <tr>
                <th></th>
                <th>Name</th>
                <th>Trade</th>
            </tr>
          </thead>
          <tfoot>
            <tr>
                <th></th>
                <th>Name</th>
                <th>Trade</th>
            </tr>
          </tfoot>
          <tbody>
              <tr each={item in this.items} onclick={onClickNavigate}>
                  <td ></td>
                  <td>{ item.Name }</td>
                  <td>{ item.TradeName }</td>
              </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- component javascript code -->
  <script>

    const tag = this;

    this.on('mount', function() {
      if(tag.dataTable)
          tag.dataTable.destroy();

      inforlub.controllers.clients.listclients(function(json){
          tag.items = json;
          tag.update();

          loadSession();
          sessionObj.clients.clientlist = json;
          sessionObj.clients.clientIndex = -1;
          saveSession();

          // console.log('json');
          // console.log(json);

          // Criar estrutura da tabela
          tag.dataTable = $("#client-table").DataTable( {
              "data": + json,
              "columns": [
                  {
                      "className":      'details-control',
                      "orderable":      false,
                      "data":           null,
                      "defaultContent": '',
                      // "render": function () { return '<i class="fa fa-plus-square" aria-hidden="true"></i>'; },
                      width: "15px"
                  },
                              { "data": "Name" },
                              { "data": "TradeName" }

              ],
              "order": [[1, 'asc']]
          } );
      });
    });

    this.on('before-mount', function() {
    });

    onClickNavigate ( e ) {
        sessionObj.clients.clientIndex = $("#client-table").DataTable().row( this ).index();
        saveSession();
        route('/list-client-details');
    }

  </script>
</list-clients>
